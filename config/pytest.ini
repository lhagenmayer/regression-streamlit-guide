[pytest]
# Comprehensive pytest configuration for Linear Regression Guide
# See https://docs.pytest.org/en/stable/reference/customize.html

# ============================================================================
# Test Discovery
# ============================================================================

# Test file patterns
python_files =
    test_*.py
    *_test.py
    tests.py

# Test class/function patterns
python_classes =
    Test*
    *Tests

python_functions =
    test_*
    *_test

# Test discovery paths
testpaths =
    tests
    src/tests  # Alternative test location

# ============================================================================
# Test Execution Options
# ============================================================================

# Default command line options
addopts =
    # Output verbosity
    -v
    --tb=short

    # Strict mode
    --strict-markers
    --strict-config

    # Performance
    --durations=10

    # Warnings
    --disable-warnings

    # Coverage (only if pytest-cov is installed)
    --cov=src
    --cov-report=term-missing
    --cov-report=html:htmlcov
    --cov-report=xml:coverage.xml
    --cov-config=config/.coveragerc

# Test execution settings
timeout = 300  # 5 minutes per test
timeout_method = thread

# Parallel execution (if pytest-xdist is available)
# numprocesses = auto

# ============================================================================
# Test Markers
# ============================================================================

markers =
    # Test Types
    unit: Unit tests for individual functions and methods
    integration: Integration tests for component interactions
    end_to_end: End-to-end tests for complete workflows
    smoke: Quick smoke tests for basic functionality

    # Testing Frameworks
    streamlit: Tests using Streamlit AppTest framework
    playwright: Tests using Playwright for browser automation
    selenium: Tests using Selenium for browser automation

    # Test Characteristics
    slow: Slow running tests (skip with '-m "not slow"')
    fast: Fast running tests (< 1 second)
    performance: Performance and benchmarking tests
    regression: Regression tests to prevent reintroduction of bugs

    # Test Focus Areas
    data: Tests for data processing and generation
    plots: Tests for visualization and plotting
    ui: Tests for user interface components
    api: Tests for API endpoints and external interfaces
    config: Tests for configuration and settings

    # Special Test Types
    property: Property-based tests using Hypothesis
    visual: Visual regression tests for UI consistency
    accessibility: Tests for accessibility compliance

    # Test Environments
    ci: Tests that only run in CI environment
    local: Tests that only run in local development
    staging: Tests for staging environment
    production: Tests for production environment

    # Test Data
    synthetic: Tests using synthetic/generated data
    real: Tests using real data
    mock: Tests using mocked dependencies
    integration_data: Tests using integration test data

# ============================================================================
# Output and Reporting
# ============================================================================

# Console output style
console_output_style = progress

# JUnit XML output for CI systems
# junit_family = xunit2
# junit_suite_name = linear_regression_guide

# ============================================================================
# Filtering and Selection
# ============================================================================

# Ignore certain files/directories during collection
norecursedirs =
    .git
    .github
    .pytest_cache
    .mypy_cache
    .tox
    .venv
    venv
    env
    .env
    __pycache__
    *.egg-info
    build
    dist
    htmlcov
    node_modules
    .DS_Store
    .vscode
    .idea

# Python path configuration
pythonpath =
    src
    tests

# ============================================================================
# Warnings and Errors
# ============================================================================

filterwarnings =
    # Treat warnings as errors in CI
    error

    # Ignore known harmless warnings
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
    ignore::UserWarning:streamlit.*
    ignore::FutureWarning:pandas.*
    ignore::FutureWarning:numpy.*

    # Specific library warnings to ignore
    ignore::DeprecationWarning:plotly.*
    ignore::UserWarning:statsmodels.*

# ============================================================================
# Plugin Configurations
# ============================================================================

# Hypothesis configuration
[tool:hypothesis]
max_examples = 50
deadline = 5000
suppress_health_check = [HealthCheck.function_scoped_fixture]

# Coverage configuration
[coverage:run]
source = src
omit =
    */tests/*
    */test_*
    src/__init__.py

[coverage:report]
exclude_lines =
    pragma: no cover
    def __repr__
    raise AssertionError
    raise NotImplementedError
    if __name__ == .__main__.:
    if TYPE_CHECKING:

[coverage:html]
directory = htmlcov

[coverage:xml]
output = coverage.xml
